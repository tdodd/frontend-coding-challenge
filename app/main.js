function advancedSearch(e,t,r){$(".results").html(""),$(".products").fadeOut("fast"),$(".loading").fadeIn("fast");var a="https://cloudplatform.coveo.com/rest/search?access_token=058c85fd-3c79-42a3-9236-b83d35588103&q=";if(a+=e+" ",a+="@tpprixnum<"+r,t)for(var i in t)a+=" @"+i+"=="+t[i];$.ajax({url:a}).done(function(t){if($(".loading").hide(),$(".no-results").hide(),t.results.length>0){var r=t.duration/1e3;$(".results-header").text(t.results.length+' results found for "'+e+'" in '+r+" seconds."),$.each(t.results,function(e,t){var r=pretty(t,e);$(".results").append(r)})}else $(".results-header").html(""),$(".no-results").text("No results found."),$(".no-results").fadeIn("slow")})}function pretty(e,t){var r="";if(r+='<div class="result" id="result-'+t+'">',e.Title.length<=40)r+='<div class="result-title"><a target="_blank" href="'+e.ClickUri+'">'+e.Title+"</a></div>";else{var a=e.Title.slice(0,25)+"...";r+='<div class="result-title"><a target="_blank" href="'+e.ClickUri+'">'+a+"</a></div>"}return r+='<img src="'+e.raw.tpthumbnailuri+'" class="result-thumbnail" height="150">',r+='<div class="result-details">',r+='<div class="result-category">Category: '+e.raw.tpcategorie+"</div>",e.raw.tpregion&&(r+='<div class="result-region">Region: '+e.raw.tpregion+"</div>"),r+='<div class="result-code">SAQ Code : '+e.raw.tpcodesaq+"</div>",r+="</div>",e.raw.tpprixnum?r+='<div class="result-price">'+parseFloat(Math.round(100*e.raw.tpprixnum)/100).toFixed(2)+"$<div/>":r+='<div class="result-price">No price<div/>',r+="</div>"}function search(e){$(".results").html(""),$(".products").fadeOut("fast"),$(".loading").fadeIn("fast");$.ajax({url:"https://cloudplatform.coveo.com/rest/search?access_token=058c85fd-3c79-42a3-9236-b83d35588103&q="+e}).done(function(t){if($(".loading").hide(),$(".no-results").hide(),t.results.length>0){var r=t.duration/1e3;$(".results-header").text(t.results.length+' results found for "'+e+'" in '+r+" seconds."),$.each(t.results,function(e,t){var r=pretty(t,e);$(".results").append(r)})}else $(".results-header").html(""),$(".no-results").text("No results found."),$(".no-results").fadeIn("slow")})}function pretty(e,t){var r="";if(r+='<div class="result" id="result-'+t+'">',e.Title.length<35)r+='<div class="result-title"><a target="_blank" href="'+e.ClickUri+'">'+e.Title+"</a></div>";else{var a=e.Title.slice(0,25)+"...";r+='<div class="result-title"><a target="_blank" href="'+e.ClickUri+'">'+a+"</a></div>"}return r+='<img src="'+e.raw.tpthumbnailuri+'" class="result-thumbnail" height="150">',r+='<div class="result-details">',r+='<div class="result-category">Category: '+e.raw.tpcategorie+"</div>",e.raw.tpregion&&(r+='<div class="result-region">Region: '+e.raw.tpregion+"</div>"),r+='<div class="result-code">SAQ Code : '+e.raw.tpcodesaq+"</div>",r+="</div>",e.raw.tpprixnum?r+='<div class="result-price">'+parseFloat(Math.round(100*e.raw.tpprixnum)/100).toFixed(2)+"$<div/>":r+='<div class="result-price">No price<div/>',r+="</div>"}function toggleSidebar(e){e.preventDefault(),sidebarShowing?($(".sidebar").animate({left:sidebarHidden},slideDuration),$(".hamburger").animate({left:hamburgerInitial},slideDuration),$(".searchbar").animate({"padding-left":searchbarInitial},slideDuration),$(".container").animate({"padding-left":bodyInitial},slideDuration),$(".overlay-logo").animate({left:logoInitial},slideDuration),sidebarShowing=!1):($(".hamburger").animate({left:hamburgerOffset},slideDuration),$(".searchbar, .container").animate({"padding-left":searchbarOffset},slideDuration),$(".overlay-logo").animate({left:logoOffset},slideDuration),$(".sidebar").animate({left:sidebarShowing},slideDuration),sidebarShowing=!0)}$(document).ready(function(){var e={};$(".sidebar-search-input").on("keyup",function(t){if(t.preventDefault(),"Enter"===t.key){var r=$("#price")[0].valueAsNumber+1;advancedSearch($(".sidebar-search-input").val(),e,r),e={}}}),$(".sidebar-btn").click(function(t){t.preventDefault();var r=$("#price")[0].valueAsNumber+1;advancedSearch($(".sidebar-search-input").val(),e,r),e={}}),$(".sidebar-input").click(function(){var t=$(this).attr("dbcol"),r=$(this).attr("value");e[t]=r})}),$(document).ready(function(){$("#search-input").on("keyup",function(e){e.preventDefault(),""==$("#search-input").val()?$(".error").show():"Enter"===e.key&&search($("#search-input").val())}),$("#search-icon").click(function(e){e.preventDefault(),""==$("#search-input").val()?$(".error").show():search($("#search-input").val())}),$(".product-image, .product-name").click(function(e){e.preventDefault(),search(e.target.attributes.category.value)}),$(".glyphicon-remove").click(function(e){e.preventDefault(),$(".error").hide()})});var sidebarHidden="-250px",sidebarShowing="0",searchbarInitial="100px",searchbarOffset="350px",hamburgerInitial="15px",hamburgerOffset="275px",logoInitial="45%",logoOffset="50%",bodyInitial="0",slideDuration="500",sidebarShowing=!1;$(document).ready(function(){$(".hamburger").click(function(e){toggleSidebar(e)}),$("#price").on("mousemove",function(){$(".price-value").text($("#price").val()+"$")})});